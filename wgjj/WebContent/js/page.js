function page(a,b,c){var e,f,g,d=this;return d.form=$("#"+a+" .dataform"),d.table=$("#"+a+" .datatable"),e='<div class="row dt-rb"><div class="col-sm-6"><div class="dataTables_info" ><div class="info" style="float: left;"></div><select class="form-control"><option value="10">10</option><option value="25">25</option><option value="50">50</option><option value="100">100</option><option value="200">200</option><option value="300">300</option><option value="500">500</option><option value="1000">1000</option><option value="2000">2000</option><option value="3000">3000</option></select></div></div><div class="col-sm-6 table_page"><div class="dataTables_paginate paging_bootstrap"><ul class="pagination"></ul></div></div></div>',$(d.form.parent()).append(e),f='<input type="hidden" name="order"><input type="hidden" name="page" value="1"><input type="hidden" name="perPage"><input type="hidden" name="totalNum">',$(d.form).append(f),g='<div class="dataTables_processing"><span class="note-success" style="padding:10px;border-radius:10px"><i class="fa fa-coffee"></i>正努力加载中，请稍后...</span></div>',$(g).insertBefore(d.form),d.pageContent=d.form.siblings().find(".table_page ul"),d.pageInfo=d.form.siblings().find(".dataTables_info .info"),d.url=d.table.attr("data-ajax-url"),d.isSearch="true"==d.table.attr("data-search")?!0:!1,d.perPage=0,d.totalNum=0,d.page=1,d.totalPage=0,d.maxPage=5,d.isChangeHead="true"==d.table.attr("data-change-head")?!0:!1,d.table.thLength=d.table.find("th").length,d.param=c?c:"",d.extData="",d.url?(d.init=function(){d.isSearch&&d.form.show(),d.table.find("th").each(function(){$(this).attr("data-sortable")&&$(this).addClass("sorting"),$(this).click(function(){var a=$(this).attr("class"),b=$(this).attr("data-field");if(a&&a.indexOf("sorting")>-1){if(void 0==b||""==b)return alert("缺少排序字段"),!1;$(this).hasClass("sorting_asc")?($(this).removeClass("sorting_asc").addClass("sorting_desc"),d.form.find("input[name=order]").val(b+" desc")):(d.initOrder(),$(this).removeClass("sorting").removeClass("sorting_desc").addClass("sorting_asc"),d.form.find("input[name=order]").val(b+" asc")),d.ajaxPost()}})});var a=base.getCookie("cookPage");a?(d.pageInfo.parent().find("select option").each(function(){$(this).val()==a&&$(this).attr("selected",!0)}),d.form.find("input[name=perPage]").val(a)):d.form.find("input[name=perPage]").val(d.table.attr("data-display-rows")?d.table.attr("data-display-rows"):10)}(),d.pageInfo.parent().find("select").bind("change",function(){var a=$(this).val();d.form.find("input[name=perPage]").val(a),d.form.find("input[name=page]").val(1),d.ajaxPost(),base.addCookie("cookPage",a,300)}),d.initOrder=function(){d.table.find(".sorting_desc").removeClass("sorting_desc").addClass("sorting"),d.table.find(".sorting_asc").removeClass("sorting_asc").addClass("sorting")},d.form.find("button[type=submit]").click(function(){return d.form.find("input[name=page]").val(1),d.ajaxPost(),!1}),d.changeHead=function(a){var b,c;for(d.table.find("tbody").html(""),b="<tr>",c=0;c<a.length;c++)b+="<th>"+a[c]+"</th>";b+="</tr>",d.table.find("thead").html(b),d.table.thLength=d.table.find("th").length},d.changeBody=function(a){var c,e,f,g,h,b="";for(c=0;c<a.length;c++){for(e="<tr>",f=0;f<d.table.thLength;f++)g="",h=d.table.find("th:eq("+f+")").attr("class"),h&&(h=base.trim(h.replace(/sorting(_\w{3,})?/,"")),""!=h&&(g="class='"+h+"'")),e+="<td "+g+">"+a[c][f]+"</td>";e+="</tr>",b+=e}d.table.find("tbody").html(b)},d.pageInfoUp=function(){d.totalNum=parseInt(d.form.find("input[name=totalNum]").val()),d.perPage=parseInt(d.form.find("input[name=perPage]").val()),d.page=parseInt(d.form.find("input[name=page]").val()),d.totalPage=Math.ceil(d.totalNum/d.perPage),0==d.totalNum?d.pageInfo.html("共 0 条记录"):d.pageInfo.html("当前显示 "+((d.page-1)*d.perPage+1)+" 到 "+(d.page*d.perPage>d.totalNum?d.totalNum:d.page*d.perPage)+" 条,共 "+d.totalNum+" 条记录,"+d.totalPage+"页")},d.pageUp=function(){var a,b,c,e,f,g,h,i,j,k,l;if(0==d.totalNum)d.pageContent.html("");else{if(a="",b="",c="",e="",1==d.page&&(a="disabled"),d.page==d.totalPage&&(b="disabled"),d.totalPage>d.maxPage&&(c="<li class='toFirst "+a+"'><a href='javascript:;'>首页</a> </li>",e="<li class='toEnd "+b+"'><a href='javascript:;'>尾页</a> </li>"),f=c+"<li class='prev "+a+"'><a href='javascript:;'>上一页</a></li>",d.totalPage<=d.maxPage)for(g=1;g<=d.totalPage;g++)h="",g==d.page&&(h="class='active'"),f+="<li "+h+"><a href='javascript:;'>"+g+"</a></li>";else for(i=1,j=d.maxPage,d.page>=d.maxPage&&(k=Math.floor(d.maxPage/2),l=0,0==d.maxPage%2&&(l=1),i=d.page-k>0?d.page-k:1,j=d.page+k-l>d.totalPage?d.totalPage:d.page+k-l,d.totalPage-i<d.maxPage&&(i=j-d.maxPage+1)),g=i;j>=g;g++)h="",g==d.page&&(h="class='active'"),f+="<li "+h+"><a href='javascript:;'>"+g+"</a></li>";f+="<li class='next "+b+"'><a href='javascript:;'>下一页</a></li>"+e,d.pageContent.html(f),d.pageContent.find("li[class!=active]").click(function(){if($(this).hasClass("prev")){if(1==d.page)return!1;d.form.find("input[name=page]").val(d.page-1)}else if($(this).hasClass("next")){if(d.page==d.totalPage)return!1;d.form.find("input[name=page]").val(parseInt(d.page)+1)}else if($(this).hasClass("toFirst")){if(1==d.page)return!1;d.form.find("input[name=page]").val(1)}else if($(this).hasClass("toEnd")){if(d.page==d.totalPage)return!1;d.form.find("input[name=page]").val(d.totalPage)}else d.form.find("input[name=page]").val($(this).find("a").html());d.ajaxPost()})}},d.ajaxPost=function(){window.scrollTo(0,0),d.form.siblings(".dataTables_processing").show();var a=d.form.serialize();$.ajax({type:"POST",url:d.url,data:a,dataType:"json",success:function(a){d.form.siblings(".dataTables_processing").hide(),d.isChangeHead&&a.headData&&d.changeHead(a.headData),a.aaData&&a.aaData.length?d.changeBody(a.aaData):d.table.find("tbody").html("<tr><td colspan='"+d.table.thLength+"'>查询数据为空</td></tr>"),d.form.find("input[name=totalNum]").val(a.totalNum?a.totalNum:0),d.pageInfoUp(),d.pageUp(),d.extData=a.extData,b&&b(d.param)}})},d.ajaxPost(),void 0):(alert("缺少请求地址"),!1)}